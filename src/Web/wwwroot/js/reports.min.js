const VisitorChart={"extends":VueChartJs.Bar,props:["visitorDataProp"],data:function(){return{visitorData:this.visitorDataProp,options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{display:!0},],yAxes:[{ticks:{beginAtZero:!0,stepSize:1,suggestedMin:0}},]},legend:{display:!0}}}},mounted(){console.log("VisitorChart mounted");this.renderChart(this.visitorData,this.options);window.addEventListener("resize",this.updateChart)},beforeDestroy(){window.removeEventListener("resize",this.updateChart)},methods:{updateChart(){this._chart.update()}},watch:{visitorDataProp(n){console.log("visitorDataProp changed in VisitorChart",n);this.visitorData=n;this.renderChart(this.visitorData,this.options)}}};new Vue({el:"#visitor-chart",components:{VisitorChart},data:{visitorData:{}},methods:{fetchVisitorData(n,t){console.log("fetchVisitorData called",n,t);fetch("/reports/getweeklyvisitors?startDate="+n.toISOString()+"&endDate="+t.toISOString()).then(n=>n.json()).then(n=>{console.log("fetchVisitorData response",n);const t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday",].map(t=>n[t]||0);this.visitorData={labels:["Lun","Mar","Mer","Gio","Ven","Sab","Dom"],datasets:[{label:"Numero di visitatori",backgroundColor:"#f87979",data:t},]}})}},mounted(){console.log("Vue instance mounted");var n=document.getElementById("weekPicker");n.addEventListener("change",function(n){console.log("weekPicker change event",n.target.value);var i=n.target.value.split("-"),u=i[0],f=i[1].substring(1),r=new Date(u,0,1+(f-1)*7),t=new Date(r);t.setDate(t.getDate()+6);this.fetchVisitorData(r,t)}.bind(this))}});